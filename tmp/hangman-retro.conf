<VirtualHost *:80>
    ServerName hangman-retro.local
    ServerAlias www.hangman-retro.local
    
    # Proxy configuration
    ProxyPreserveHost On
    ProxyRequests Off
    
    # Proxy all requests to the Docker container
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/
    
    # Headers for better compatibility
    ProxyPassReverse / http://localhost:3000/
    ProxyPassReverseMatch ^/(.*) http://localhost:3000/$1
    
    # Enable WebSocket support (if needed for future features)
    RewriteEngine on
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/?(.*) "ws://localhost:3000/$1" [P,L]
    
    # Security headers
    Header always set X-Frame-Options DENY
    Header always set X-Content-Type-Options nosniff
    Header always set Referrer-Policy strict-origin-when-cross-origin
    
    # Logging
    ErrorLog ${APACHE_LOG_DIR}/hangman-retro_error.log
    CustomLog ${APACHE_LOG_DIR}/hangman-retro_access.log combined
    
    # Optional: Force HTTPS redirect (uncomment if you have SSL)
    # RewriteEngine On
    # RewriteCond %{HTTPS} off
    # RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</VirtualHost>

# Optional: HTTPS version (uncomment and configure if you have SSL certificates)
# <VirtualHost *:443>
#     ServerName hangman-retro.local
#     ServerAlias www.hangman-retro.local
#     
#     SSLEngine on
#     SSLCertificateFile /path/to/your/certificate.crt
#     SSLCertificateKeyFile /path/to/your/private.key
#     
#     ProxyPreserveHost On
#     ProxyRequests Off
#     ProxyPass / http://localhost:3000/
#     ProxyPassReverse / http://localhost:3000/
#     
#     Header always set Strict-Transport-Security "max-age=63072000; includeSubDomains; preload"
#     Header always set X-Frame-Options DENY
#     Header always set X-Content-Type-Options nosniff
#     
#     ErrorLog ${APACHE_LOG_DIR}/hangman-retro_ssl_error.log
#     CustomLog ${APACHE_LOG_DIR}/hangman-retro_ssl_access.log combined
# </VirtualHost>